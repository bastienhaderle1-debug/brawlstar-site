<!--pages/mybrawl.html-->
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MyBrawl</title>
  <link rel="stylesheet" href="../style.css" />
  <style>
    .grid-2{ display:grid; grid-template-columns:1fr 1fr; gap:12px; }
    .statbar{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin-top:12px; }
    .statchip{ display:flex; gap:8px; align-items:center; padding:8px 10px; border-radius:999px; background: rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.18); }
    .statnum{ font-weight:700; }
    @media (max-width:980px){ .grid-2{ grid-template-columns:1fr; } }
  </style>
</head>

<body>
  <header class="header container">
    <div class="headerbar">
      <div>
        <h1 data-title="MYBRAWL">ðŸ‘¤ MyBrawl</h1>
        <p class="muted">Connexion + cocher tes skins (tes donnÃ©es sont sauvegardÃ©es).</p>

        <nav class="nav">
          <a href="../index.html">Accueil</a>
          <a href="./mybrawl.html">MyBrawl</a>
          <a href="./profile.html">Profil</a>
          <a href="./brawlers.html">Brawlers</a>
          <a href="./skins.html">Skins</a>
        </nav>
      </div>

      <div class="header-right">
        <div class="badge ko" id="globalAuthBadge">
          <span class="dot"></span>
          <span>Non connectÃ©</span>
        </div>

        <a class="seg-btn" href="./mybrawl.html">ðŸ‘¤ Mon compte</a>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- AUTH -->
    <section class="card" id="authCard">
      <h2>Connexion</h2>

      <div class="grid-2">
        <div class="filter">
          <label for="email">Email</label>
          <input class="input" id="email" type="email" placeholder="toi@email.com" />
        </div>

        <div class="filter">
          <label for="password">Mot de passe</label>
          <input class="input" id="password" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" />
        </div>
      </div>

      <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:12px;">
        <button class="seg-btn is-active" id="btnLogin" type="button">Se connecter</button>
        <button class="seg-btn" id="btnSignup" type="button">CrÃ©er un compte</button>
        <button class="seg-btn" id="btnResend" type="button">ðŸ“© Renvoyer lâ€™email</button>
      </div>

      <p class="muted" id="authMsg" style="margin-top:10px;"></p>
    </section>

    <!-- APP -->
    <section id="app" style="display:none;">
      <!-- Toolbar (actions uniquement) -->
      <section class="toolbar">
        <div class="filter">
          <label>Utilisateur</label>
          <div class="muted" id="userLine">â€”</div>
        </div>

        <div style="display:flex; align-items:end; gap:10px; flex-wrap:wrap;">
          <button class="seg-btn" id="btnReload" type="button">ðŸ”„ Recharger</button>
          <button class="seg-btn" id="btnLogout" type="button">ðŸšª DÃ©connexion</button>
        </div>
      </section>

      <!-- Stats -->
      <section class="card">
        <h2>ðŸ“Š Mes stats</h2>

        <div class="stats-grid">
          <div class="stat">
            <div class="stat-label">PossÃ©dÃ©s (dans la liste)</div>
            <div class="stat-value" id="statOwned">0</div>
          </div>
          <div class="stat">
            <div class="stat-label">Total</div>
            <div class="stat-value" id="statTotal">0</div>
          </div>
          <div class="stat">
            <div class="stat-label">Progression</div>
            <div class="stat-value" id="statPct">0%</div>
          </div>
        </div>

        <div class="progress"><div class="progress-bar" id="progressBar"></div></div>
        <div class="statbar" id="rarityBar"></div>
        <p class="muted" id="status" style="margin-top:10px;"></p>
      </section>

      <!-- Skins -->
      <section>
        <h2>âœ… Mes skins</h2>

        <div style="display:flex; gap:12px; flex-wrap:wrap; align-items:end; margin: 12px 0;">
          <div class="filter" style="max-width:320px; flex:1; min-width:220px;">
            <label for="search">Recherche</label>
            <input class="input" id="search" type="text" placeholder="ex: shelly star, pirate..." />
          </div>

          <div class="filter" style="min-width:220px;">
            <label for="filterBrawler">Brawler</label>
            <select id="filterBrawler" class="select"></select>
          </div>

          <div class="filter" style="min-width:220px;">
            <label for="filterRarity">RaretÃ©</label>
            <select id="filterRarity" class="select"></select>
          </div>

          <div class="filter" style="min-width:220px;">
            <label>Affichage</label>
            <label style="display:flex; gap:8px; align-items:center; user-select:none;">
              <input type="checkbox" id="onlyOwned" />
              <span>Uniquement mes skins</span>
            </label>
          </div>
        </div>

        <p class="muted" id="resultCount"></p>
        <div class="cards" id="cards"></div>
      </section>
    </section>
  </main>

  <footer class="footer container">
    <a href="../index.html">â¬… Retour Ã  lâ€™accueil</a>
  </footer>

  <script src="../js/toast.js"></script>
  <script src="../js/guard.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="../data/supabase-client.js"></script>
  <script src="../data/skins-data.js"></script>
  <script src="../js/owned-service.js"></script>

  <script src="../js/mybrawl.js"></script>
  <script src="../js/site.js"></script>
</body>
</html>
